{% extends 'baseBack.html.twig' %}

{% block title %}<title>List of Resources</title>{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        /* CSS for statistics section */
        #statistics {
            background-color: #f8f9fa;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }

        #statistics h2 {
            color: #a90909;
            font-size: 24px;
            margin-bottom: 10px;
        }

        #statistics h3 {
            font-size: 20px;
            color: #343a40;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container mt-4">
            <div class="card-header" align="center"><br>
                 <h1 class="mb-4"style="color: #a90909;"><strong>List of Resources</strong></h1>
            </div>

        <a href="{{ path('app_ressource_new') }}" class="btn float-end" style="margin-block-end: 20px; background-color: #a90909; color: white;">Add New Resource</a>       
       <form method="get" action="{{ path('app_ressource_index') }}" class="mb-3">
        <div class="input-group">
            <input type="text" name="titreSearch" class="form-control" placeholder="Search by Title...">
            <input type="text" name="typeSearch" class="form-control" placeholder="Search by Type...">
            <input type="text" name="dateSearch" class="form-control" placeholder="Search by Date...">
            <button type="submit" class="btn btn-primary" style="background-color: #a90909;">Search</button>
        </div>
    </form>     
      
      
        <table class="table table-borderless table-data3">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Title</th>
                    <th scope="col">Type</th>
                    <th scope="col">Date Publication</th>
                    <th scope="col">Field</th>
                    <th scope="col">Image</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for ressource in ressources %}
                 {% set img = ressource.imageBRessource %}               
                    <tr>
                        <td>{{ ressource.id }}</td>
                        <td>{{ ressource.titreB }}</td>
                        <td>{{ ressource.typeB }}</td>
                        <td>{{ ressource.datePublicaB ? ressource.datePublicaB|date('Y-m-d') : '' }}</td>
                        <td>{{ ressource.categorieRessoB }}</td>
                        <td><img style="width:150px;height:150px;" src="{{asset(img) }}"></td>


                        <td>
                            <a href="{{ path('app_ressource_show', {'id': ressource.id}) }}" class="btn btn-outline-secondary btn-sm">Show</a>
                            <a href="{{ path('app_ressource_edit', {'id': ressource.id}) }}" class="btn btn-outline-danger btn-sm">Edit</a>

                        </td>
                    </tr>
                {% else %}
                    <tr>
                     <td colspan="10" style="text-align: center; color: #a90909;"><strong>No records found</strong></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

              <!-- Statistics Section -->
        <div id="statistics" class="mt-5 p-3 border rounded">
            <!-- Total number of resources -->
            <h2>Statistics</h2>
            <h3>Total Number of Resources : {{ ressources|length }}</h3>
        </div>

    </div>
    <br><br>
{% endblock %}
